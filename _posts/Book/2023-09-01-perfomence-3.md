---
title: "í”„ë¡ íŠ¸ì—”ë“œ ì„±ëŠ¥ ìµœì í™”ê°€ì´ë“œ-3"

categories:
  - Book

toc: true
toc_sticky: true
toc_label: "ëª©ì°¨"

date: 2023-09-01
last_modified_at: 2023-09-01
---

# 3ì¥ í™ˆí˜ì´ì§€ ìµœì í™”

![image](https://github.com/teawon/Algorithm_js/assets/78795820/2b0f8d81-0d75-4afa-b9c0-3d58b406c037){: .center}

ë³¸ ê¸€ì€ "ì›¹ ê°œë°œ ìŠ¤í‚¬ì„ í•œ ë‹¨ê³„ ë†’ì—¬ì£¼ëŠ” í”„ë¡ íŠ¸ì—”ë“œ ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œ" ì±…ì˜ ê³µë¶€ë‚´ìš©ìœ¼ë¡œ ê¸°ì–µë ¥ì´ ì¢‹ì§€ ì•Šì€ ë¯¸ë˜ì˜ ë‚˜ë¥¼ ìœ„í•œ ì •ë¦¬ê¸€ì…ë‹ˆë‹¤.

## 3.1 ì´ë¯¸ì§€ ì§€ì—°ë¡œë”©

![image](https://github.com/teawon/teawon.github.io/assets/78795820/61409e70-96a3-4261-9a70-5da36549501f)
![image](https://github.com/teawon/teawon.github.io/assets/78795820/4ee4ce8b-07d5-41db-931f-a4de070fe6ff)

- ë¬¸ì œ ìƒí™© : ì²˜ìŒ í˜ì´ì§€ì— ë“¤ì–´ì˜¤ë©´ ë¹„ë””ì˜¤ê°€ í‘œí˜„ë˜ëŠ”ë°, ìŠ¤í¬ë¡¤ì„ ë‚´ë ¤ì•¼ í‘œí˜„ë˜ëŠ” ì´ë¯¸ì§€ì •ë³´ê°€ ë¨¼ì € ë¡œë“œë˜ê³  ìˆì–´ì„œ ë¹„ë””ì˜¤ì •ë³´ë¥¼ ë°›ì•„ì˜¤ëŠ”ë° ì§€ì—°ì´ ë°œìƒí•˜ê³ ìˆë‹¤.
- ëª©í‘œ : ì´ë¯¸ì§€ëŠ” ì¡°ê¸ˆ ë” ëŠ¦ê²Œ ë°›ì•„ì˜¤ê³ , ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ë¹„ë””ì˜¤ë¥¼ ë¨¼ì € ë°›ì•„ì˜¤ì

ê·¸ëŸ¼.. ì´ë¯¸ì§€ëŠ” ì–¸ì œ ë°›ì•„ì˜¤ì§€??

â†’ ì´ë¯¸ì§€ê°€ í•„ìš”í•˜ê¸° ì§ì „, ì¦‰ **ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ë‹¤ê°€ ì´ë¯¸ì§€ê°€ ë³´ì´ëŠ” ì‹œì **ì— ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•˜ì!

<br>

> ì´ë¯¸ì§€ íŒŒì¼ì€ ì‚¬ìš©ìê°€ ìŠ¤í¬ë¡¤ì„ ë‚´ë ¤ í•´ë‹¹ ì´ë¯¸ì§€ê°€ ë·°í¬íŠ¸ì— ë“¤ì–´ì˜¤ëŠ” ì‹œì ì— ë¡œë“œí•˜ê²Œí•˜ë©´ í˜ì´ì§€ê°€ ë¡œë“œë˜ì—ˆì„ ë•Œ ë¹„ë””ì˜¤ íŒŒì¼ì„ ë¨¼ì € ë¡œë“œí•  ìˆ˜ ìˆê³ , ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤

![image](https://github.com/teawon/teawon.github.io/assets/78795820/1eac1885-d363-4f94-bf27-f60ddcdf5576)

> ì ê·¸ëŸ¼ ì´ 3ê°œì˜ ì´ë¯¸ì§€ë¥¼ ëŠ¦ê²Œ ë°›ì•„ì˜¤ë„ë¡ ì²˜ë¦¬í•´ë´…ì‹œë‹¤

<hr>

### 3.1.1 throttle ê¸°ë²•

ì›¹ í˜ì´ì§€ì—ì„œ ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ëŠ” ë§¤ìš° ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•œë‹¤.

(ì‹¤ì œë¡œ ìŠ¤í¬ë¡¤ì„ ê°ì§€í•˜ê³  ì½˜ì†”ì— ë¡œê·¸ë¥¼ ì¶œë ¥í•´ë³´ë©´, í•œ í‹±ë‹¹ ê±°ì˜ í•˜ë‚˜ì”© ë§ì€ ì´ë²¤íŠ¸ê°€ ë°œìƒí•¨)

ì´ëŸ° ìƒí™©ì—ì„œ Throttle ê¸°ë²•ì„ ê³ ë ¤í•´ë³¸ë‹¤ë©´??

<br>

**[throttle]**

- ì´ë²¤íŠ¸ê°€ ê³¼ë„í•˜ê²Œ ë°œìƒí•  ê²½ìš°, ê·¸ ì²˜ë¦¬ë¥¼ ì œí•œí•˜ëŠ” ê¸°ë²•
- ì¼ì • ì‹œê°„ (ì˜ˆ: 200ms) ë™ì•ˆ ì´ë²¤íŠ¸ë¥¼ í•œ ë²ˆë§Œ ì²˜ë¦¬í•˜ë„ë¡ ì œí•œí•  ìˆ˜ ìˆë‹¤.

**[ë¬¸ì œì ]**

- ì •í™•ì„± ë¬¸ì œ: Throttleì„ ì‚¬ìš©í•˜ë©´, ì´ë¯¸ì§€ê°€ ë·°í¬íŠ¸ì— ë“¤ì–´ì™”ì„ ë•Œ ë¡œë”©ë˜ì–´ì•¼ í•˜ëŠ” ì‹œì ì„ ë†“ì¹  ìˆ˜ ìˆë‹¤.
  ì˜ˆë¥¼ ë“¤ì–´, 200ms ë™ì•ˆ ì´ë²¤íŠ¸ë¥¼ ë¬´ì‹œí•œë‹¤ë©´, ì‚¬ìš©ìê°€ ë¹ ë¥´ê²Œ ìŠ¤í¬ë¡¤ì„ ì›€ì§ì—¬ ì´ë¯¸ì§€ê°€ ë·°í¬íŠ¸ì— ì§§ì€ ì‹œê°„ ë™ì•ˆë§Œ ë…¸ì¶œë˜ì—ˆì„ ë•Œ, ë¡œë”©ì´ ì´ë£¨ì–´ì§€ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤ëŠ”ê²ƒ...

ì±…ì—ì„œëŠ” ì´ì— ëŒ€í•œ ëŒ€í•œìœ¼ë¡œ **Intersection Observer** ë°©ë²•ì„ ì†Œê°œí•œë‹¤.

<hr>

### 3.1.2 Intersection Observer

**[Intersection Observer]**

Intersection ObserverëŠ” ì›¹ í˜ì´ì§€ì˜ íŠ¹ì • ìš”ì†Œì™€ ë·°í¬íŠ¸ê°€ êµì°¨í•˜ëŠ” ì‹œì ì„ ê°ì§€í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë¸Œë¼ìš°ì € API

ì¦‰, ì–´ë–¤ ìš”ì†Œê°€ í™”ë©´ì— ë³´ì´ëŠ”ì§€ í˜¹ì€ ì‚¬ë¼ì§€ëŠ”ì§€ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ íŒë‹¨í•  ìˆ˜ ìˆëŠ”ë° ì´ë¥¼ í™œìš©í•˜ë©´, ì´ë¯¸ì§€ë‚˜ ë‹¤ë¥¸ ìš”ì†Œë“¤ì´ ì‹¤ì œë¡œ ì‚¬ìš©ìì—ê²Œ ë³´ì¼ í•„ìš”ê°€ ìˆì„ ë•Œë§Œ ë¡œë”©ì„ ì‹œì‘í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.

> ë¸Œë¼ìš°ì € APIê°€ ë­ì§€??
>
> ë¸Œë¼ìš°ì € APIëŠ” ë³„ë„ì˜ ì„¤ì¹˜ë‚˜ ë‹¤ìš´ë¡œë“œ ì—†ì´ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì˜ ëª¨ìŒ
> ì´ë¥¼ í†µí•´ ì›¹ í˜ì´ì§€ì— ë‹¤ì–‘í•œ ê¸°ëŠ¥(ì˜ˆ: ìœ„ì¹˜ ì •ë³´ ì–»ê¸°, ì˜¤ë””ì˜¤ ì¬ìƒ, ì›¹ í˜ì´ì§€ ìš”ì†Œ ë³€ê²½ ë“±)ì„ JavaScriptë¡œ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤)

<br>

ì ê·¸ëŸ¼ ë°”ë¡œ ì½”ë“œë¥¼ í™•ì¸í•´ë³´ì ì´ë¯¸ì§€ ë¡œë”©ì€ imgíƒœê·¸ì— srcê°€ í• ë‹¹ë˜ëŠ” ìˆœê°„ì— ë°œìƒí•œë‹¤

â†’ ì¦‰ ì ì ˆí•œ ì‹œì ì— srcë¥¼ í• ë‹¹í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ë¡œë”©í•˜ê²Œí•´ì•¼í•œë‹¤.

```javascript

useEffect(() => {
    // í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œ ìƒì„±í•˜ë„ë¡ useEffectë¥¼ ì‚¬ìš©

const options = {
      root: null
			// ë·°í¬íŠ¸ ìš”ì†Œ ì„¤ì •( null ì´ë©´ ê¸°ë³¸ ë¸Œë¼ìš°ì €)
      threshhold: 1,
			// 0~1 ì‚¬ì´ì˜ ê°’ìœ¼ë¡œ, ì´ë¯¸ì§€ ë…¸ì¶œ ë¹„ìœ¨ì„ ì˜ë¯¸í•œë‹¤. 1ì´ë©´ ì „ë¶€ ë³´ì—¬ì•¼ ì‹¤í–‰
      rootMargin: 0,
			// ì´ë¯¸ì§€ê°€ ë¯¸ë¦¬ ë¡œë”©ë˜ë„ë¡ ì—¬ìœ ë¶„ì„ ì¤€ë‹¤
    };


// ì´ë•Œ ì´ë¯¸ì§€ì˜ í¬ê¸°ë¥¼ ë¯¸ë¦¬ ì§€ì •í•˜ì§€ì•Šìœ¼ë©´, thresholdë¥¼ 1ë¡œ í•˜ë”ë¼ë„, ì´ë¯¸ì§€ ë†’ì´ê°€ 0ì´ë¼ì„œ ì´ë¯¸ì§€ ì „ì²´ê°€ ë³´ì´ì§€ ì•Šì•„ë„ ë¡œë”©ëœë‹¤.
    const callback = (entries, observer) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) { // trueë¼ë©´ ë¡œë”© ì‹œì‘
          entry.target.src = entry.target.dataset.src;
          observer.unobserve(entry.target); // observeí•´ì œ
        }
      });
    };

    const observer = new IntersectionObserver(callback, options);

    observer.observe(imgRef.current);

    return () => observer.disconnect(); // clean up í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ë¦¬ì†ŒìŠ¤ ë‚­ë¹„ë¥¼ ì¤„ì¸ë‹¤
  }, []);

  return (
    <div className="Card text-center">
      <img data-src={props.image} ref={imgRef} />
      //data-srcì— ì„ì‹œë¡œ í• ë‹¹ í›„ íŠ¹ì • ì‹œì ì— srcë¡œ ê°’ì„ í• ë‹¹í•œë‹¤
      <div className="p-5 font-semibold text-gray-700 text-xl md:text-lg lg:text-xl keep-all">
        {props.children}
      </div>
    </div>
  );

```

<br>

![image](https://github.com/teawon/teawon.github.io/assets/78795820/155134d5-4709-48b6-95e7-0efcb8841eba)

ì´ì œ 3ê°œì˜ ì´ë¯¸ì§€(main1,2,3â€¦jpg)ëŠ” ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ë‹¤ê°€ ë³´ì´ëŠ” ì‹œì ì— ë‹¤ìš´ë°›ê²Œ ë˜ì—ˆë‹¤

<hr>

Q. data-srcë¼ëŠ” ëª…ì¹­ì€ ì˜ˆì•½ì–´ì¸ê°€?? ì•”ë¬µì ì¸ í‘œí˜„?

HTML5ì—ì„œëŠ” ì‚¬ìš©ìê°€ ì„ì˜ë¡œ ë°ì´í„°ë¥¼ ìš”ì†Œì— ì €ì¥í•  ìˆ˜ ìˆë„ë¡ **`data-*`** í˜•ì‹ì˜ ì†ì„±ì„ ë„ì…í–ˆë‹¤.

ì¦‰ ì•„ë¬´ ì´ë¦„ì´ë‚˜ ì‚¬ìš© ê°€ëŠ¥

**`data-*`** ì†ì„±ì˜ ì´ë¦„ì€ **`data-`** ì ‘ë‘ì‚¬ë¥¼ ì œê±°í•˜ê³ , ë‚˜ë¨¸ì§€ ë¶€ë¶„ì€ ì¹´ë©œì¼€ì´ìŠ¤(camelCase)ë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©í•˜ë¯€ë¡œ entry.target.dataset.src í˜•íƒœë¡œ ê°’ì— ì ‘ê·¼í•œê²ƒ

<hr>

Q. í˜¹ì‹œ ë‹¤ë¥¸ ê¸°ë²•ì˜ ì´ë¯¸ì§€ ì§€ì—°ë¡œë”©ë„ ìˆë‚˜?

### 3.1.3 Native Lazy Loading

**[Native Lazy Loading]**

Native Lazy Loadingì€ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ë‚´ì¥ëœ, ì¦‰ "ë„¤ì´í‹°ë¸Œ"ë¡œ ì œê³µí•˜ëŠ” ì´ë¯¸ì§€ ì§€ì—° ë¡œë”© ê¸°ëŠ¥.

ì´ ê¸°ëŠ¥ì„ í™œìš©í•˜ë©´ ë³„ë„ì˜ JavaScript ì½”ë“œ ì—†ì´ë„ ì´ë¯¸ì§€ë‚˜ iframeì„ ì§€ì—° ë¡œë”©í•  ìˆ˜ ìˆë‹¤

```javascript
<img src="image.jpg" alt="Description" loading="lazy">


// loading ì†ì„±
// - auto  : ë¸Œë¼ìš°ì €ê°€ ê²°ì •
// - lazy  : ìš”ì†Œê°€ ë·°í¬íŠ¸ì— ê°€ê¹Œì›Œì§ˆë•Œê¹Œì§€ ì§€ì—°
// - eager : ì§€ì—°ì—†ì´ ë°”ë¡œ ë¡œë”©

```

**[ì£¼ì˜ì ]**

- ìƒì„¸í•œ ì‹œì  ì œì–´ ë¶ˆê°€
  ì„¸ë¶€ì ì¸ ì§€ì—° ë¡œë”©ì˜ ì‹œì ì„ ì§€ì •í•  ìˆ˜ ì—†ë‹¤. ì¦‰, ë·°í¬íŠ¸ê°€ ì–¼ë§ˆë‚˜ ê°€ê¹Œì›Œì ¸ì•¼ ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•  ê²ƒì¸ì§€ ê°™ì€ ìƒì„¸í•œ ì„¤ì •ì´ ë¶ˆê°€ëŠ¥.

- ë¸Œë¼ìš°ì € ì§€ì›ì„±
  ëª¨ë“  ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì´ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ëŠ” ì•Šì•„ í˜¸í™˜ì„±ì„ ê³ ë ¤í•´ì•¼ í•œë‹¤.

- SEO ê´€ë ¨ ì£¼ì˜ì 
  Native Lazy Loadingì„ ì‚¬ìš©í•˜ë©´, ì¼ë¶€ ê²€ìƒ‰ ì—”ì§„ì´ ì§€ì—° ë¡œë”©ëœ ì½˜í…ì¸ ë¥¼ ì •í™•í•˜ê²Œ í¬ë¡¤ë§í•˜ì§€ ëª»í•  ìˆ˜ ìˆì–´ ì´ëŠ” ì›¹ í˜ì´ì§€ì˜ ê²€ìƒ‰ ì—”ì§„ ìˆœìœ„ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤. (íŠ¹íˆ, ì¤‘ìš”í•œ ì´ë¯¸ì§€ë‚˜ ì½˜í…ì¸ ì— ëŒ€í•´ì„œ ë”ìš± ì£¼ì˜í•„ìš”)

## 3.2 ì´ë¯¸ì§€ ìµœì í™”

Squoosh ì›¹ì‚¬ì´íŠ¸ë¥¼ í†µí•œ ì´ë¯¸ì§€ ë³€í™˜ (êµ¬ê¸€ ì œê³µ) -> ë¶ˆí•„ìš”í•˜ê²Œ í° ì´ë¯¸ì§€ë¥¼ WebPí¬ë©§ìœ¼ë¡œ ì••ì¶•í•˜ì!

<img width="714" alt="image" src="https://github.com/teawon/teawon.github.io/assets/78795820/267d1c75-398b-451c-a599-18a72c822400">

> ê¸°ì¡´ ì´ë¯¸ì§€ vs WebPí™•ì¥ìë¡œ ì••ì¶•í•œ ì´ë¯¸ì§€ í¬ê¸° ë¹„êµ

ë‹¨, í˜¸í™˜ì„± ë¬¸ì œë¥¼ ìœ„í•´ pictureíƒœê·¸ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.

- pictureíƒœê·¸ëŠ” ë‹¤ì–‘í•œ íƒ€ì…ì˜ ì´ë¯¸ì§€ ë Œë”ë§ì— ì‚¬ìš©ë˜ëŠ” ì»¨í…Œì´ë„ˆë¡œ ì§€ì›ë˜ëŠ” íƒ€ì…ì˜ ì´ë¯¸ì§€ë¥¼ ìœ„ì—ì„œë¶€í„° í™•ì¸ í›„ ë Œë”ë§í•œë‹¤.
- pictureì˜ ê²½ìš° sresetì— ì´ë¯¸ì§€ ì£¼ì†Œê°€ ë“¤ì–´ê°€ë©´ ì´ë¯¸ì§€ê°€ ë¡œë”©ëœë‹¤ (imgì˜ ê²½ìš° src)

```javascript

useEffect(() => {

    const options = {
    const callback = (entries, observer) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const target = entry.target;
          const previousSibling = target.previousSibling;

// previousSibling ì€ DOMì—ì„œ ì´ì „ í˜•ì œ ìš”ì†Œë¥¼ ì°¸ì¡°í•˜ëŠ” ì†ì„±
// refìì²´ê°€ imgíƒœê·¸ë¥¼ ê°€ë¦¬í‚¤ê¸° ë•Œë¬¸ì— ìƒìœ„ì˜ sourceì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤


          target.src = target.dataset.src;
          previousSibling.srcset = previousSibling.dataset.srcset;
          observer.unobserve(entry.target);
        }
      });
    };

return (
    <div className="Card text-center">
      <picture>
        <source data-srcset={props.webp} type="image/webp" />
        <img data-src={props.image} ref={imgRef} />
      </picture>
      <div className="p-5 font-semibold text-gray-700 text-xl md:text-lg lg:text-xl keep-all">
        {props.children}
      </div>
    </div>
  );

```

- ìœ„ ì½”ë“œì—ì„œ ê°€ì¥ ìƒìœ„ì˜ WebPì´ë¯¸ì§€ë¥¼ ìš°ì„ ìœ¼ë¡œ ë¡œë“œí•œë‹¤
- ì§€ì›í•˜ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ sourece , ê·¸ë¦¬ê³  ë§ˆì§€ë§‰ì—ëŠ” Imgë¥¼ ë¡œë“œí•œë‹¤

<hr>

Q. previousSiblingì„ í†µí•´ ìƒìœ„ sourceíƒœê·¸ì— ì ‘ê·¼í–ˆëŠ”ë° ë§Œì•½ ì´ë¯¸ì§€ê°€ ì—¬ëŸ¬ê°œë¼ë©´?
â‡’ ì•„ë˜ì²˜ëŸ¼ previousSiblingì„ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•˜ë©´ëœë‹¤.

```javascript
<picture>
  <source data-srcset={main_styles_webp} type="image/webp" />
  <source data-srcset={main_styles_png} type="image/png" />
  <img data-src={main_styles} ref={imgEl3} />,
</picture>;

const callback = (entries, observer) => {
  entries.forEach((entry) => {
    if (entry.isIntersecting) {
      const pngSourceEl = entry.target.previousSibling; // for png
      const webpSourceEl = pngSourceEl.previousSibling; // for webp

      webpSourceEl.srcset = webpSourceEl.dataset.srcset;
      pngSourceEl.srcset = pngSourceEl.dataset.srcset;

      entry.target.src = entry.target.dataset.src;
      observer.unobserve(entry.target);
    }
  });
};
```

ë˜ëŠ” ì•„ë˜ì²˜ëŸ¼ í´ë˜ìŠ¤ë¥¼ í• ë‹¹í•´ì„œ ì ‘ê·¼í•˜ë©´ DOMêµ¬ì¡°ì˜ ë³€ê²½ì— ë³´ë‹¤ ì•ˆì •ì ì´ê³  ëª…í™•í•˜ê²Œ íŠ¹ì • ìš”ì†Œë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤

```javascript

const webpSourceEl = entry.target.parentElement.querySelector('.webp-source');
const pngSourceEl = entry.target.parentElement.querySelector('.png-source');

{..}

<picture>
    <source class="webp-source" data-srcset={main_styles_webp} type="image/webp" />
    <source class="png-source" data-srcset={main_styles_png} type="image/png" />
    <img data-src={main_styles} ref={imgEl3} />,
</picture>


```

[ì´ë¯¸ì§€ í™•ì¥ìì™€ ìµœì í™”](https://teawon.github.io/cs/image/)

## 3.3 ë™ì˜ìƒ ìµœì í™”

![image](https://github.com/teawon/teawon.github.io/assets/78795820/8749a824-0c1d-4bcc-b28a-073748f98384)

ì¼ë‹¨ ë™ì˜ìƒì˜ ê²½ìš° í•„ìš”í•œ ì• ë¶€ë¶„ì„ ë¨¼ì € ë‹¤ìš´ë¡œë“œí•œ ë’¤ ìˆœì°¨ì ìœ¼ë¡œ ë‚˜ë¨¸ì§€ ë‚´ìš©ì„ ë‹¤ìš´ë¡œë“œí•˜ê¸°ë•Œë¬¸ì— NetworkíŒ¨ë„ì—ì„œ ë‚˜ëˆ„ì–´ì„œ ë‹¤ìš´ë°›ëŠ”ë‹¤.

(ë¼ìš°ì €ë‚˜ ìŠ¤íŠ¸ë¦¬ë° ì„œë¹„ìŠ¤ê°€ ì•Œì•„ì„œ ì²˜ë¦¬í•´ì¤Œ)

ë‹¨ **ì••ì¶• ìì²´ê°€ í™”ì§ˆì„ ë–¨ì–´ëœ¨ë¦¬ê¸°ë•Œë¬¸ì—** ì˜ìƒì˜ í™”ì§ˆì´ ì¤‘ìš”í•œ ì„œë¹„ìŠ¤ë¼ë©´ ì••ì¶•ì— ëŒ€í•´ ì£¼ì˜í•´ì•¼í•œë‹¤.

-> ë™ì˜ìƒ ìµœì í™”ë„ ì´ë¯¸ì§€ì™€ ë§ˆì°¬ê°€ì§€ë¡œ WebMí™•ì¥ìë¥¼ ì‚¬ìš©í•´ ì••ì¶•ì„ ì²˜ë¦¬í•˜ì.

-> ì´ë•Œë„ ë§ˆì°¬ê°€ì§€ë¡œ í˜¸í™˜ì„±ì„ ê³ ë ¤í•´ videoíƒœê·¸ì•ˆì— sourceë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤

```javascript
// ì „
<video
    src={video}
    className="absolute translateX--1/2 h-screen max-w-none min-w-screen -z-1 bg-black min-w-full min-h-screen"
    autoPlay
    loop
    muted
/>

//í›„

<video
  className="absolute translateX--1/2 h-screen max-w-none min-w-screen -z-1 bg-black min-w-full min-h-screen"
  autoPlay
  loop
  muted
>
  <source src={video_webm} type="video/webm" />
  <source src={video} type="video/mp4" />
</video>

```

<hr>

ì••ì¶•ìœ¼ë¡œ ì¸í•œ í™”ì§ˆ ì €í•˜ ë¬¸ì œë¥¼ ì™„ì „íˆ í•´ê²°í•  ìˆ˜ëŠ” ì—†ì§€ë§Œ, ì‚¬ìš©ì ê²½í—˜ì„ ì†ìƒì‹œí‚¤ì§€ ì•Šìœ¼ë©´ì„œ ë¡œë”© ì†ë„ë¥¼ ê°œì„ í•˜ëŠ” ë° ì•„ë˜ì˜ ë°©ë²•ì´ í™œìš©ë˜ê¸°ë„í•œë‹¤.

1. ë¸”ëŸ¬ ì²˜ë¦¬ : cssì˜ Blurí•„í„°ë¥¼ ì‚¬ìš©í•´ í™”ì§ˆì €í•˜ë¥¼ ëˆˆì— ë„ì§€ ì•Šë„ë¡ í•˜ê¸°

2. íŒ¨í„´ ì ìš© : ì˜ìƒìœ„ì— íŒ¨í„´ì„ ì”Œìš°ëŠ” ë°©ë²•

![image](https://github.com/teawon/Algorithm_js/assets/78795820/0410bf96-f6c0-43c2-ad96-b7e47421cf24)
![image](https://github.com/teawon/Algorithm_js/assets/78795820/705447fa-d3aa-466e-b870-24d5a1b49c79)
![image](https://github.com/teawon/Algorithm_js/assets/78795820/b5ea85fd-bd67-4e9d-8927-aa6380ca0b2a)

> ì›ë³¸ , blur , íŒ¨í„´ì„ ì ìš©í•œ ê°ê°ì˜ ì´ë¯¸ì§€ë“¤
>
> ëˆˆì†ì„(?) ê°™ì§€ë§Œ í™”ì§ˆì´ ë‚®ë‹¤ëŠ” ì¸ì‹ì„ ì¤„ì—¬ì£¼ëŠ” ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“ ë‹¤

```
// íŒ¨í„´ì˜ ê²½ìš° ì•„ë˜ cssë¥¼ ì‚¬ìš©
// blurì˜ ê²½ìš° filter ì˜µì…˜ì„ ì‚¬ìš©
.pattern-overlay {
    background-image: url('path/to/pattern.png');
    opacity: 0.5;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
```

<br>

## 3.3 í°íŠ¸ ìµœì í™”

![font-1](https://github.com/teawon/Algorithm_js/assets/78795820/91f687c7-71ce-414a-a48a-7fd0e1a930f0)

- ë¬¸ì œ ìƒí™© : ë¹„ë””ì˜¤ì— í‘œí˜„ë˜ëŠ” í°íŠ¸ê°€ ëŠ¦ê²Œ ì ìš©ë˜ë©´ì„œ, í°íŠ¸ê°€ ë³€í•˜ëŠ”ê²Œ ì‚¬ìš©ì ëˆˆì— ë°”ë¡œ ë“¤ì–´ì˜¨ë‹¤.
- ëª©í‘œ : ì‚¬ìš©ìì—ê²Œ ì‹œê°ì ìœ¼ë¡œ ë¶€ì •ì ì¸ ì˜í–¥ì„ ì¤„ì´ê¸° ìœ„í•´ í°íŠ¸ë¥¼ ìµœì í™”í•´ë³´ì

### 3.3.1 FOUT vs FOIT

**[FOUT (Flash of Unstyled Text)]**

- í°íŠ¸ì˜ ë‹¤ìš´ë¡œë“œ ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ ë¨¼ì € í…ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì¤Œ (ìœ„ ì˜ˆì‹œ ì˜ìƒì—ì„œ ì‚¬ìš©ì¤‘ì¸ ë°©ì‹)

  - ì¥ì : í˜ì´ì§€ ë‚´ìš©ì„ ë°”ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.
  - ë‹¨ì : í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ì´ ë°”ë€ŒëŠ” ê²ƒì´ ì‚¬ìš©ìì—ê²Œ ì–´ìƒ‰í•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆë‹¤.

**[FOIT]**

- í°íŠ¸ê°€ ë¡œë“œë˜ì–´ì•¼ í…ìŠ¤íŠ¸ë¥¼ í‘œí˜„

  - ì¥ì : ì‹œê°ì ìœ¼ë¡œ ì–´ìƒ‰í•œ ë³€í™”ê°€ ì—†ë‹¤.
  - ë‹¨ì : ì‚¬ìš©ìê°€ í˜ì´ì§€ ë‚´ìš©ì„ í™•ì¸í•˜ëŠ” ë° ì‹œê°„ì´ ë” ê±¸ë¦¼.

> â€œëŠ¦ê²Œ ë³´ì—¬ì¤˜ë„ ë˜ëŠ” í…ìŠ¤íŠ¸ëŠ” ì°¨ë¼ë¦¬ FOITìœ¼ë¡œ í‘œí˜„í•˜ì!â€

### 3.3.2 ì‹œì ì œì–´

í°íŠ¸ ì ìš©ì˜ ì‹œì ì„ ì œì–´í•´ì„œ ìµœì í™”ë¥¼ ìˆ˜í–‰

-> â€˜CSSì˜ font-display ì†ì„±ì„ í™œìš©í•˜ì!â€

**`font-display`** ì†ì„±ì˜ ì£¼ìš” ê°’

1. **auto**: ë¸Œë¼ìš°ì €ì˜ ê¸°ë³¸ ë¡œë”© ë™ì‘ (ëŒ€ë¶€ë¶„ì˜ ê²½ìš° FOIT)
2. **block**: FOIT
3. **swap**: FOUT
4. **fallback**: 3ì´ˆë™ì•ˆ FOIT í›„ FOUT
5. **optional**: FOIT í›„ ë¸Œë¼ìš°ì €ê°€ ë„¤íŠ¸ì›Œí¬ ìƒíƒœë¥¼ ê¸°ì¤€ìœ¼ë¡œ í°íŠ¸ ë¡œë”©ì„ í¬ê¸°

ì—¬ê¸°ì„œëŠ” CSSì˜ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ í†µí•´ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ ì‹œí‚¤ì. (ì´ë•Œ, **fontfaceobserver** ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©)

```javascript

import FontFaceObserver from "fontfaceobserver";

const font = new FontFaceObserver("BMYEONSUNG");

function BannerVideo() {
  const [isFontLoaded, setIsFontLoaded] = useState(false);

  useEffect(() => {
    // 20ì´ˆ íƒ€ì„ì•„ì›ƒì‹œ Promiseì—ì„œ ì—ëŸ¬ ë°œìƒ
    font.load(null, 20000).then(() => {
      console.log("í°íŠ¸ ë¡œë“œ");
      setIsFontLoaded(true);
    });
  }, []);

  return (
  { ... }
      <div
        className="w-full h-full flex justify-center items-center"
        style={{
          opacity: isFontLoaded ? 1 : 0,
          transition: "opacity 0.3s ease",
        }}
      >
       { ..content }
    </div>
  );
}

export default BannerVideo;

//1. fontfaceobserverë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ í°íŠ¸ ë‹¤ìš´ì‹œì ì„ í™•ì¸
//2. ë¡œë“œ ë˜ëŠ” ì‹œì ì— fade-in ì• ë‹ˆë©”ì´ì…˜ì„ ì ìš©ì‹œí‚¤ì
```

![font-2](https://github.com/teawon/Algorithm_js/assets/78795820/abb9e3c9-03ca-46cd-9654-5fad2c52e476)

> ê¸°ì¡´ê³¼ ë‹¤ë¥´ê²Œ í°íŠ¸ê°€ ë¡œë“œë˜ëŠ” ì‹œì ì— CSSíš¨ê³¼ë¥¼ ë„£ì–´ ìì—°ìŠ¤ëŸ½ê²Œ í°íŠ¸ê°€ í‘œí˜„ëœë‹¤

### 3.3.3 í¬ë©§ ë³€ê²½

ì›¹ í˜ì´ì§€ì—ì„œ í°íŠ¸ë¥¼ ì‚¬ìš©í•  ë•Œ, íŒŒì¼ í¬ë§·ì˜ ì„ íƒì€ ì„±ëŠ¥ê³¼ í˜¸í™˜ì„±ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ë©° ì£¼ë¡œ TTF, OTF, WOFF, WOFF2 ë“±ì˜ ë‹¤ì–‘í•œ í¬ë§·ì´ ìˆìŒ

1. TTF (TrueType Font) & OTF (OpenType Font)

   - íŠ¹ì§•: ë²¡í„° ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì ¸ í™•ëŒ€/ì¶•ì†Œê°€ ììœ ë¡œì›€.
   - ì›¹ ìµœì í™”: ë³¸ë˜ ë°ìŠ¤í¬í†± í™˜ê²½ì„ ìœ„í•´ ì„¤ê³„ë˜ì—ˆê¸° ë•Œë¬¸ì— íŒŒì¼ í¬ê¸°ê°€ ìƒëŒ€ì ìœ¼ë¡œ í¬ë‹¤.

2. WOFF (Web Open Font Format)
   - íŠ¹ì§•: OTFì™€ TTFë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ë˜, ì›¹ ì „ì†¡ì„ ìœ„í•´ ì••ì¶•ë˜ì–´ ìˆë‹¤.
   - ì›¹ ìµœì í™”: íŒŒì¼ í¬ê¸°ê°€ ì‘ì•„ ë¡œë”© ì‹œê°„ì´ ë¹ ë¥´ì§€ë§Œ, ëª¨ë“  ë¸Œë¼ìš°ì €ê°€ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ.
3. WOFF2
   - íŠ¹ì§•: WOFF1ë³´ë‹¤ ì•½ 30% ë” íš¨ìœ¨ì ìœ¼ë¡œ ì••ì¶•ë˜ì–´ ìˆë‹¤.
   - ì›¹ ìµœì í™”: í•„ìš”í•œ ê¸€ë¦¬í”„ë§Œ í¬í•¨í•˜ì—¬ ì„œë¸Œì…‹ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
     - ì˜ˆë¥¼ë“¤ì–´ "Hello"ë¼ëŠ” ë¬¸ìë§Œ ì‚¬ìš©í•œë‹¤ë©´ í•´ë‹¹ ë¬¸ìì—´ì— ëŒ€í•œ í°íŠ¸ì •ë³´ë§Œ ê°€ì ¸ì˜¤ëŠ”ê²ƒ

https://transfonter.org/ ì‚¬ì´íŠ¸ ì´ìš©í•´ í°íŠ¸ì˜ í™•ì¥ìë¥¼ ì¤„ì—¬ë³´ì

![image](https://github.com/teawon/Algorithm_js/assets/78795820/41b7360c-2f39-4ace-abda-8c6707b55a20)

> íŠ¹íˆ ì„œë¸Œì…‹ í°íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ í•„ìš”í•œ ì¼ë¶€ ë¬¸ìì •ë³´ë§Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

![image](https://github.com/teawon/Algorithm_js/assets/78795820/d710a269-e5db-46d3-96a4-6fb864709011)

> (ì„œë¸Œì…‹í°íŠ¸ì™€ ê¸°ì¡´í°íŠ¸ì˜ í¬ê¸°ì°¨ì´ ë¹„êµ)

ê·¸ë¦¬ê³  ë§ˆì°¬ê°€ì§€ë¡œ í˜¸í™˜ì„±ë¬¸ì œë¥¼ ê³ ë ¤í•´ ì•„ë˜ì™€ ê°™ì´ í°íŠ¸ë¥¼ ì ìš©ì‹œí‚¤ì.

```javascript
@font-face {
  font-family: BMYEONSUNG;
  src: url("./assets/fonts/subset-BMYEONSUNG.ttf") format("woff2"),
		    url("./assets/fonts/subset-BMYEONSUNG.woff") format("woff"),
		    url("./assets/fonts/subset-BMYEONSUNG.ttf") format("truetype");
  font-display: block;
  /*  ìœ„ì—ì„œë¶€í„° ìš°ì„ ì ìœ¼ë¡œ í°íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œ */
}
```

### 3.3.4 DATA-URL

Data-URLì€ ì›¹ ë¦¬ì†ŒìŠ¤ë¥¼ URL ë¬¸ìì—´ë¡œ ì§ì ‘ ë‚´ì¥í•˜ëŠ” ë°©ì‹ì„ ì˜ë¯¸.

ì´ë¥¼ í†µí•´ í°íŠ¸ íŒŒì¼ì„ CSS ë‚´ë¶€ì— ì§ì ‘ ì‚½ì…í•  ìˆ˜ ìˆìœ¼ë©° ë³„ë„ì˜ ë„¤íŠ¸ì›Œí¬ ì—†ì´ cssíŒŒì¼ì—ì„œ í°íŠ¸ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

- ì¥ì 
  - HTTP ìš”ì²­ ê°ì†Œ: ë³„ë„ì˜ íŒŒì¼ ìš”ì²­ì´ ì—†ê¸° ë•Œë¬¸ì— ë„¤íŠ¸ì›Œí¬ ë¶€í•˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤.
  - ë¡œë”© ì†ë„ í–¥ìƒ: ì‘ì€ ì´ë¯¸ì§€ë‚˜ í°íŠ¸ì˜ ê²½ìš°, ë³„ë„ì˜ ë„¤íŠ¸ì›Œí¬ ì§€ì—° ì—†ì´ ì¦‰ì‹œ ë¡œë”©ì´ ê°€ëŠ¥.
  - í˜¸í™˜ì„± ë³´ì¥: URL í˜•ì‹ì€ ëª¨ë“  ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì›ë˜ë¯€ë¡œ í˜¸í™˜ì„± ë¬¸ì œê°€ ì—†ë‹¤.
- ë‹¨ì 
  - íŒŒì¼ í¬ê¸° ì¦ê°€: Base64 ì¸ì½”ë”©ì€ ì›ë˜ì˜ íŒŒì¼ í¬ê¸°ë¥¼ ì•½ 33% ì¦ê°€.
  - ìºì‹± ë¬¸ì œ: Data-URLì€ ë¸Œë¼ìš°ì € ìºì‹œì— ì €ì¥ë˜ì§€ ì•Šì•„, ì¬ë°©ë¬¸ ì‹œ ë‹¤ì‹œ ë¡œë“œ.
  - ìœ ì§€ ë³´ìˆ˜ ì–´ë ¤ì›€: ì›ë³¸ íŒŒì¼ì˜ ìˆ˜ì •ì´ í•„ìš”í•  ê²½ìš°, ë‹¤ì‹œ ì¸ì½”ë”©í•´ì•¼ í•˜ëŠ” ì‘ì—… ë³µì¡.

ì¦‰ í°íŠ¸ì™€ ê°™ì´ ì‘ì€ íŒŒì¼ì˜ ê²½ìš° data-urlì„ ì‚¬ìš©í•˜ë©´ ë¦¬ì†ŒìŠ¤ë¥¼ ë°”ë¡œ ë¡œë”©í•´ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤!!

> ë¬¼ë¡  ê·¸ë§Œí¼ ì²˜ìŒ ë¡œë”©ì‹œê°„ì´ ê¸¸ì–´ì§„ë‹¤
>
> íŒŒì¼ì´ ê¸¸ì–´ì§€ê³  ìˆ˜ì •í• ë•Œë§ˆë‹¤ ë‹¤ì‹œ ì¸ì½”ë”©ì„ í•´ì•¼í•˜ëŠ”ë° ì‘ì€ íŒŒì¼ì— ëŒ€í•´ ì‚¬ìš©í•œë‹¤ë©´ ì‚¬ìš©ì ëˆˆì— ë¡œë”©ì´ ì§ì ‘ì ìœ¼ë¡œ ë“œëŸ¬ë‚  ê²ƒ ê°™ì§€ëŠ” ì•Šë‹¤
>
> ë„¤íŠ¸ì›Œí¬ ì†ë„ê°€ ë¹¨ë¼ì§„ ìš”ì¦˜ì—ëŠ” ì˜ ì•ˆì“°ì¼ ê²ƒ ê°™ë‹¤ê³  ìƒê°ğŸ¤”

```javascript

@font-face {
  /* dataURLë°©ì‹ì˜ base64ì¸ì½”ë”©ëœ ì •ë³´ë¥¼ ë„£ìœ¼ë©´ ë²ˆë“¤íŒŒì¼ë‚´ì—ì„œ í•œêº¼ë²ˆì— ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê¸°ë•Œë¬¸ì— ë³„ë„ì˜ HTTPìš”ì²­ ë°˜ë³µ íšŸìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤.
  (ê¸°ì¡´ì—ëŠ” ë²ˆë“¤íŒŒì¼ ì™¸ì ìœ¼ë¡œ ë”°ë¡œ ê° ì´ë¯¸ì§€ë‚˜ í°íŠ¸ì •ë³´ë¥¼ HTTPë¡œ ë°›ì•„ì™€ì•¼í•¨ */
  font-family: BMYEONSUNG;
  src: url("data:font/woff2;charset=utf-8;base64......format("woff2")
}
```

![image](https://github.com/teawon/Algorithm_js/assets/78795820/1bd82ad2-4bbd-476a-935a-d18547fcf0da)
![image](https://github.com/teawon/Algorithm_js/assets/78795820/b1abeb7d-d41b-4344-99d8-aefd739ed183)

> ì‹¤ì œ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ìœ¼ë¡œ ì¸ì‹í•  ë¿ ë³„ë„ì˜ ë‹¤ìš´ë¡œë“œ ì‹œê°„ì´ ê±¸ë¦¬ì§€ ì•ŠëŠ”ë‹¤

## ì°¸ê³ ìë£Œ

[https://bongbongdang.tistory.com/142](https://bongbongdang.tistory.com/142)

[https://scarlett-dev.gitbook.io/all/it/lazy-loading](https://scarlett-dev.gitbook.io/all/it/lazy-loading)

[https://velog.io/@byeol4001/Base-64ì™€-base64-img-ì‚¬ìš©í•˜ê¸°](https://velog.io/@byeol4001/Base-64ì™€-base64-img-ì‚¬ìš©í•˜ê¸°)
