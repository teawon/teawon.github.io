<script>
  "use strict";

  window.customUtterances = {
    theme: '{{ site.comments.utterances.theme | default: "github-light" }}',
    darkTheme: "github-dark",
    onChange: (theme) => {
      var commentContainer = document.querySelector("#utterances-comments");

      if (!commentContainer) {
        return;
      }

      while (commentContainer.hasChildNodes()) {
        commentContainer.removeChild(commentContainer.firstChild);
      }

      var script = document.createElement("script");
      script.setAttribute("src", "https://utteranc.es/client.js");
      script.setAttribute(
        "repo",
        "{{ site.comments.utterances.repository | default: site.repository }}"
      );
      script.setAttribute("label", "{{ site.comments.utterances.label }}");
      script.setAttribute(
        "issue-term",
        '{{ site.comments.utterances.issue_term | default: "pathname" }}'
      );
      script.setAttribute("theme", theme);
      script.setAttribute("crossorigin", "anonymous");

      commentContainer.appendChild(script);
    },
  };
</script>
